<br/>

>[!WARNING|style: flat|label: 简要说明 ]
>
>(`Mapperly`) 在生成映射代码时 <span style='color:red'>[ 自动检测映射类中所有可用的 - 静态方法 ( 类型转换 ) ]</span>
>
>-  入参类型：源类型`source`
>-  返回类型：目标类型`target`
>
>⚠ <span style='color:red'>[ 方法签名可自定义，但入参 + 返回类型必须匹配 ]</span>
>
><br/>



```csharp
# [ 源 ]
public record class Q1(string QFile1, int QFile2);
public class T1Class
{
     public Q1 Q1File { get; set; }
     public string Name { get; set; }
     public int Age { get; set; }
}

# [ 目标 ]
public record class Q2(string QFile3, int QFile4);
public class T2Class
{
     public Q2 Q2File { get; set; }
     public string Name { get; set; }
     public int Age { get; set; }
}


```

<!-- tabs:start -->

#### **[ A ]自动映射**

```csharp
[Mapper]
public static partial class MapperConfiguration
{
    
     # Error: 因只支持映射 Target 的顶层属性( 不支持复杂类型嵌套 )
     # [MapProperty(source: nameof(T1Class.Q1File.QFile1), target: nameof(T2Class.Q2File.QFile3))]
     
     # [ 配置映射 T1Class → T2Class ] 
     [MapProperty(source: nameof(T1Class.Q1File), target: nameof(T2Class.Q2File))]
     public static partial T2Class MapTo(T1Class @class);

     # [ 配置映射 Q1 → Q2 ] 因属性名称不同
     [MapProperty(source: nameof(Q1.QFile1), target: nameof(Q2.QFile3))]
     [MapProperty(source: nameof(Q1.QFile2), target: nameof(Q2.QFile4))]
     private static partial Q2 MapTo(Q1 q1);

}


```

```csharp
T1Class t1Class = new()
{
     Name = "John Doe",
     Age = 30,
     Q1File = new Q1("Hello", 100),
};

T2Class t2Class = MapperConfiguration.MapTo(t1Class);
Console.WriteLine($"Name: {t2Class.Name}, " +
     $"Age: {t2Class.Age}," +
     $"Q2.QFile1: {t2Class.Q2File?.QFile3}," +
     $"Q2.QFile2: {t2Class.Q2File?.QFile4}");
Console.WriteLine(nameof(T1Class.Q1File.QFile1));


```



#### **[ ☢ B ]自动映射( 类型指定)**

```csharp
# [ 方式1 ] 内部映射
[Mapper]
public static partial class MapperConfiguration
{
     
     [MapProperty(source: nameof(T1Class.Q1File), target: nameof(T2Class.Q2File))]
     public static partial T2Class Map(T1Class @class);

     # [ 自动映射 ] 优先级高于默认映射
     # - 通过配置：AutoUserMappings = false ( 关闭 Mapperly 自动检测, 需标记 [UserMapping] )   
     # - [ 如某个类型定义多个转换方法, 需通过 [UserMapping(Default = true)] 指定唯一默认 ]
     [UserMapping]
     private static Q2 Q1Map(Q1 q1) { 
         return new Q2(q1.QFile1, q1.QFile2);
     }

}

----------------------------------------------------------------------------------------
    
# [ 方式2 ] 外部映射
[Mapper]
[UseStaticMapper(typeof(Q2Converter))]
public static partial class MapperConfiguration
{
     
     [MapProperty(source: nameof(T1Class.Q1File), target: nameof(T2Class.Q2File))]
     public static partial T2Class Map(T1Class @class);
     
}

public static class Q2Converter
{
     public static Q2 MapQ1toQ2(Q1 q1)
     {
          return new Q2(q1.QFile1, q1.QFile2);
     }
}


```



#### **[ ☢ C ]自动映射( 属性指定 )**

```csharp
[Mapper]
public static partial class MapperConfiguration
{

     [MapProperty(source:nameof(T1Class.Q1File), target:nameof(T2Class.Q2File), Use = nameof(Q1Map))]
     public static partial T2Class Map(T1Class @class);

     # [ 属性指定 ]
     prviate static Q2 Q1Map(Q1 q1) { 
          return new Q2(q1.QFile1, q1.QFile2);
     }

}


```





<!-- tabs:end -->

